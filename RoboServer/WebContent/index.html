<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>RoboServer</title>

	<link href="css/jquery-ui-1.10.0.custom.css" rel="stylesheet">
	<script src="js/jquery-1.9.0.js"></script>
	<script src="js/jquery-ui-1.10.0.custom.js"></script>

	<style type="text/css">
	div.wrapper{
	    width: 630px;
	}

	div.my_header{
	    padding: 10px;
	    width: 610px;
	    height: 100px;
	    overflow: hidden;
	}

	div.left_box{
	    float: left;
	    padding: 5px;
	    width: 290px;
	}
	
	div.right_box{
	    float: right;
	    padding: 5px;
	    width: 290px;
	}
	
	div.footer{
	    clear:both;
	    padding: 5px;
	    width: 610px;
	}
	</style>

	<script>
	$(function() {
		
		/*
		Drive UI
		*/
		$( "#move" ).buttonset();

		$( "#forward" ).button({icons: {primary: "ui-icon-arrowthick-1-n"}, text: false});
		$("#forward").click(function(){
			sendDriveRequest("forward",3);
		});
		$( "#forwardLeft" ).button({icons: {primary: "ui-icon-arrowthick-1-nw"}, text: false});
		$("#forwardLeft").click(function(){
			sendDriveRequest("forwardLeft",3);
		});
		$( "#forwardRight" ).button({icons: {primary: "ui-icon-arrowthick-1-ne"}, text: false});
		$("#forwardRight").click(function(){
			sendDriveRequest("forwardRight",3);
		});
		$( "#turnLeft" ).button({icons: {primary: "ui-icon-arrowthick-1-w"}, text: false});
		$("#turnLeft").click(function(){
			sendDriveRequest("turnLeft",3);
		});
		$( "#turnRight" ).button({icons: {primary: "ui-icon-arrowthick-1-e"}, text: false});
		$("#turnRight").click(function(){
			sendDriveRequest("turnRight",3);
		});
		$( "#backward" ).button({icons: {primary: "ui-icon-arrowthick-1-s"}, text: false});
		$("#backward").click(function(){
			sendDriveRequest("backward",3);
		});
		$( "#backwardLeft" ).button({icons: {primary: "ui-icon-arrowthick-1-sw"}, text: false});
		$("#backwardLeft").click(function(){
			sendDriveRequest("backwardLeft",3);
		});
		$( "#backwardRight" ).button({icons: {primary: "ui-icon-arrowthick-1-se"}, text: false});
		$("#backwardRight").click(function(){
			sendDriveRequest("backwardRight",3);
		});
		$( "#stop" ).button({icons: {primary: "ui-icon-bullet"}, text: false});
		$("#stop").click(function(){
			sendDriveRequest("forward",0);
		});
		
		/*
		Camera UI
		*/
		$( "#cam_up" ).button({icons: {primary: "ui-icon-arrowthick-1-n"}, text: false});
		$("#cam_up").click(function(){
			sendCameraRequest("up");
		});
		$( "#cam_down" ).button({icons: {primary: "ui-icon-arrowthick-1-s"}, text: false});
		$("#cam_down").click(function(){
			sendCameraRequest("down");
		});
		$( "#cam_left" ).button({icons: {primary: "ui-icon-arrowthick-1-w"}, text: false});
		$("#cam_left").click(function(){
			sendCameraRequest("left");
		});
		$( "#cam_right" ).button({icons: {primary: "ui-icon-arrowthick-1-e"}, text: false});
		$("#cam_right").click(function(){
			sendCameraRequest("right");
		});
		$( "#cam_center" ).button({icons: {primary: "ui-icon-bullet"}, text: false});
		$("#cam_center").click(function(){
			sendCameraRequest("center");
		});
		
		window.setInterval(function(){
			$.ajax({
				  url: "/RoboServer/dispatch/Status",
				  success: function(message){
					  $("#status").val(message);
				  },
				  error: function(jqXHR, textStatus, errorThrown){
					  $("#status").css("color", "red");
					  $("#status").val(errorThrown + ": "+ jqXHR.responseText);
				  }
			});
		}, 5000);
		
		function sendDriveRequest(direction, speed){
			$.ajax({
				  url: "/RoboServer/dispatch/Drive/"+direction+"/"+speed,
				  success: function(message){
					  $("#messages").val(message);
				  },
				  error: function(jqXHR, textStatus, errorThrown){
					  $("#messages").css("color", "red");
					  $("#messages").val(errorThrown + ": "+ jqXHR.responseText);
				  }
				});
		}
		
		function sendCameraRequest(direction){
			$.ajax({
				  url: "/RoboServer/dispatch/Camera/"+direction,
				  success: function(message){
					  $("#messages").val(message);
				  },
				  error: function(jqXHR, textStatus, errorThrown){
					  $("#messages").css("color", "red");
					  $("#messages").val(errorThrown + ": "+ jqXHR.responseText);
				  }
				});
		}
		
		// initially force robot to stop
		sendDriveRequest("forward", 0);
		// initialize camera to center position
		sendCameraRequest("center");
		
		document.body.style.fontSize = '1.2em';
	});
	</script>
</head>
<body>

<div class="wrapper">
	<div class="header">
	       Here comes the video screen
	</div>

    <div class="left_box">
		<p><b>Fahrbefehle</b></p>
		<form>
			<div id="move">
				<input type="radio" id="forwardLeft" name="radio"/><label for="forwardLeft">Halb Links</label><span style="padding-left : 1.2em"></span>
				<input type="radio" id="forward" name="radio" /><label for="forward">&nbsp;&nbsp;Vorwärts&nbsp;&nbsp;</label><span style="padding-left : 1.2em"></span>
				<input type="radio" id="forwardRight" name="radio" /><label for="forwardRight">Halb Rechts</label><br><br>
				
				<input type="radio" id="turnLeft" name="radio" /><label for="turnLeft">Links Drehen</label><span style="padding-left : 1.2em"></span>
				<input type="radio" id="stop" name="radio" checked="checked" /><label for="stop">&nbsp;Stop&nbsp;</label><span style="padding-left : 1.2em"></span>
				<input type="radio" id="turnRight" name="radio" /><label for="turnRight">Rechts Drehen</label><br><br>
				
				<input type="radio" id="backwardLeft" name="radio" /><label for="backwardLeft">Halb Links</label><span style="padding-left : 1.2em"></span>
				<input type="radio" id="backward" name="radio" /><label for="backward">&nbsp;Rückwärts&nbsp;</label><span style="padding-left : 1.2em"></span>
				<input type="radio" id="backwardRight" name="radio" /><label for="backwardRight">Halb Rechts</label><br><br>
			</div>
		</form>
    </div>

    <div class="right_box">
	    <p><b>Kamerasteuerung</b></p>
		<span style="padding-left : 3.0em"></span><button id="cam_up">Auf</button><br>
		<button id="cam_left">Links</button>
		<button id="cam_center">Center</button>
		<button id="cam_right">Rechts</button><br>
		<span style="padding-left : 3.0em"></span><button id="cam_down">Ab</button>
		
    </div>
    
    <div class="footer">
	    <p><b>Statusmeldungen</b></p>
	    <div>
			<input id="status" type="text" size="77" readonly="readonly">
		</div>
		<div>
			<input id="messages" type="text" size="77" readonly="readonly">
		</div>
    </div>
</div>

</body>
</html>